#!/bin/bash

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ðŸ’€ Crypto Killer - Ø³ÙƒØ±Ø¨Øª Ø§Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ø³Ø­Ø±ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# 
# Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±Ø¨Øª ÙŠÙØ¹Ù„ ÙƒÙ„ Ø´ÙŠØ¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹!
# ÙÙ‚Ø· Ø§Ù†Ø³Ø®Ù‡ ÙˆØ§Ù„ØµÙ‚Ù‡ ÙÙŠ Ø³ÙŠØ±ÙØ± DigitalOcean
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

set -e

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ðŸ’€ Crypto Killer Bot - Ø§Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ø§Ù„Ø®Ø·ÙˆØ© 1: ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù…
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

echo "1ï¸âƒ£ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù…..."
apt update -qq
apt install -y python3 python3-pip git curl nano

echo "âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø­Ø¯Ù‘Ø«!"
echo ""

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ø§Ù„Ø®Ø·ÙˆØ© 2: ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

echo "2ï¸âƒ£ ØªÙ†Ø²ÙŠÙ„ Ù…Ù„ÙØ§Øª Ø§Ù„Ø¨ÙˆØª..."
cd /root
rm -rf crypto_killer 2>/dev/null || true
mkdir -p crypto_killer
cd crypto_killer

# ØªÙ†Ø²ÙŠÙ„ crypto_killer_bot.py
echo "   â€¢ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ..."
curl -sL https://raw.githubusercontent.com/saleemoov/try4/main/crypto_killer_bot.py -o crypto_killer_bot.py

# Ø¥Ø°Ø§ ÙØ´Ù„ gitØŒ Ù†Ù†Ø´Ø¦ Ø§Ù„Ù…Ù„ÙØ§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹
if [ ! -f crypto_killer_bot.py ]; then
    echo "âš ï¸  Ù„Ù… Ø£Ø³ØªØ·Ø¹ Ø§Ù„ØªÙ†Ø²ÙŠÙ„ Ù…Ù† GitHub"
    echo "ðŸ“ Ø³Ø£Ø·Ù„Ø¨ Ù…Ù†Ùƒ Ù†Ø³Ø® Ø§Ù„Ù…Ù„ÙØ§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹..."
    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "âš ï¸  Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ Ø§Ù„Ø¢Ù†:"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo ""
    echo "1. Ø§ÙØªØ­ terminal Ø¢Ø®Ø± ÙÙŠ Ø¬Ù‡Ø§Ø²Ùƒ"
    echo "2. Ù†ÙØ° Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø±:"
    echo ""
    echo "   cat /workspaces/try4/crypto_killer_bot.py | ssh root@YOUR_IP 'cat > /root/crypto_killer/crypto_killer_bot.py'"
    echo ""
    echo "3. Ø«Ù… Ø§Ø±Ø¬Ø¹ Ù‡Ù†Ø§ ÙˆØ§Ø¶ØºØ· Enter..."
    read -p ""
fi

echo "âœ… Ø§Ù„Ù…Ù„ÙØ§Øª Ø¬Ø§Ù‡Ø²Ø©!"
echo ""

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ø¹Ø¯Ø§Ø¯ trading_config.json
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

echo "3ï¸âƒ£ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª..."
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ðŸ“ Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„:"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

read -p "ðŸ”‘ OKX API Key: " OKX_API_KEY
read -p "ðŸ” OKX Secret: " OKX_SECRET
read -p "ðŸ”’ OKX Passphrase: " OKX_PASSPHRASE
echo ""
read -p "ðŸ¤– Telegram Bot Token: " TELEGRAM_TOKEN
read -p "ðŸ’¬ Telegram Chat ID: " TELEGRAM_CHAT_ID

echo ""
echo "âœ… Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª..."

cat > trading_config.json << EOF
{
  "okx": {
    "api_key": "$OKX_API_KEY",
    "api_secret": "$OKX_SECRET",
    "passphrase": "$OKX_PASSPHRASE"
  },
  "telegram": {
    "bot_token": "$TELEGRAM_TOKEN",
    "chat_id": "$TELEGRAM_CHAT_ID"
  }
}
EOF

echo "âœ… Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¬Ø§Ù‡Ø²!"
echo ""

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ø§Ù„Ø®Ø·ÙˆØ© 4: ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

echo "4ï¸âƒ£ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©..."
pip3 install -q ccxt pandas numpy requests python-dotenv

echo "âœ… Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ù…Ø«Ø¨ØªØ©!"
echo ""

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

echo "5ï¸âƒ£ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨ÙˆØª..."
timeout 10 python3 crypto_killer_bot.py || true

echo ""
echo "âœ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ØªÙ…!"
echo ""

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ø§Ù„Ø®Ø·ÙˆØ© 6: Ø¥Ù†Ø´Ø§Ø¡ systemd service
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

echo "6ï¸âƒ£ Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯Ø§Ø¦Ù…..."

cat > /etc/systemd/system/crypto-killer.service << 'EOF'
[Unit]
Description=Crypto Killer Trading Bot
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/crypto_killer
ExecStart=/usr/bin/python3 -u /root/crypto_killer/crypto_killer_bot.py
Restart=always
RestartSec=10
StandardOutput=append:/root/crypto_killer/crypto_killer.log
StandardError=append:/root/crypto_killer/crypto_killer.log

[Install]
WantedBy=multi-user.target
EOF

echo "âœ… Ø§Ù„Ø®Ø¯Ù…Ø© Ø¬Ø§Ù‡Ø²Ø©!"
echo ""

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Ø§Ù„Ø®Ø·ÙˆØ© 7: ØªÙØ¹ÙŠÙ„ ÙˆØªØ´ØºÙŠÙ„
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

echo "7ï¸âƒ£ ØªÙØ¹ÙŠÙ„ ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ø¨ÙˆØª..."
systemctl daemon-reload
systemctl enable crypto-killer
systemctl start crypto-killer

sleep 3

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… Ø§Ù„ØªØ«Ø¨ÙŠØª Ù…ÙƒØªÙ…Ù„!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø©
systemctl status crypto-killer --no-pager

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ðŸ’€ Crypto Killer ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† 24/7!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ðŸ“Š Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³Ø¬Ù„:"
echo "   tail -f /root/crypto_killer/crypto_killer.log"
echo ""
echo "ðŸ”§ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:"
echo "   systemctl restart crypto-killer  # Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„"
echo "   systemctl stop crypto-killer     # Ø¥ÙŠÙ‚Ø§Ù"
echo "   systemctl status crypto-killer   # Ø§Ù„Ø­Ø§Ù„Ø©"
echo ""
echo "ðŸŽ‰ ØªÙ…! Ø§Ù„Ø¨ÙˆØª ÙŠØµØ·Ø§Ø¯ Ø§Ù„ÙØ±Øµ Ø§Ù„Ø¢Ù†!"
echo ""
